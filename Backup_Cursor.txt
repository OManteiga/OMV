
-- BACKUP CON CURSORES


USE MASTER 
GO
CREATE OR ALTER PROC Backup_con_Cursores
AS
	BEGIN
	DECLARE  @name VARCHAR(50) --DATABASE NAME
	DECLARE  @path VARCHAR(50) --PATH FOR BACKUP NAME
	DECLARE  @filename VARCHAR(50) --FILENAME FOR BACKUP
	DECLARE  @filedate VARCHAR(50) --USED FOR FILE NAME
	
	--SPECIFY DATABASE VBAKUP DIRECTORY

	SET @path ='C:\Backup\'

	SELECT  @filedate = CONVERT (VARCHAR(20),GETDATE(),112) +
	REPLACE (CONVERT(VARCHAR(20),GETDATE(),108),':','')

	DECLARE db_cursor CURSOR READ_ONLY FOR
	SELECT name
	FROM master.dbo.sysdatabases
	WHERE name IN ('Northwind','Adventureworks2017')
